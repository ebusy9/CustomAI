{% extends 'base.html.twig' %}

{% block title %}CustomAI
{% endblock %}

{% block body %}

	<div class='modal-container'>
		<div id="info-modal" class="modal">
			<div class="modal-header">
				<div class="title-container">
					<svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>
					<p>Trial version</p>
				</div>
				<svg class="close-modal-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
			</div>
			<div class="modal-body">
				<div class="info-modal-text-content">
					Please be aware that this is a trial version, allowing to send a maximum of four messages per day.
					<br><br>Remaining messages:
					<span id="remaining-msg"></span>
				</div>
			</div>
			<div class="info-modal-footer">
				<button class="info-modal-btn" id="info-ok-btn">OK</button>
			</div>
		</div>
	</div>


	<div class='modal-container'>
		<div id="delete-modal" class="modal">
			<div class="modal-header">
				<div class="title-container">
					<svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>
					<p>Delete</p>
				</div>
				<svg class="close-modal-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
			</div>
			<div class="modal-body">
				<div class="delete-modal-text-content">
					Are you sure you want to delete all the messages ?
				</div>
			</div>
			<div class="delete-modal-footer">
				<button class="delete-modal-btn" id="confirm-delete">Delete</button>
				<button class="delete-modal-btn" id="cancel-delete">Cancel</button>
			</div>
		</div>
	</div>


	<form method="POST" action="api/gpt" id="message-form">
		<div class='modal-container'>
			<div id="settings-modal" class="modal">
				<div class="modal-header">
					<div class="title-container">
						<svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
						<p>Settings</p>
					</div>
					<svg class="close-modal-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
				</div>
				<div class="modal-body">
					<label for="model-select">Model:</label>
					<div class="select-container">
						<select name="message[model]" id="model-select"></select>
					</div>
					<label for="context-limit-input">Context Limit:</label>
					<div class="number-input-container">
						<div class="number-step-down-btn" id="context-limit-input-minus">-</div>
						<input type="number" name="message[contextLimit]" class="number-input" id="context-limit-input" min="0" max="10" value="0" readonly tabindex="-1">
						<div class="number-step-up-btn" id="context-limit-input-plus">+</div>
					</div>
					<div class="hint">
						<span class="hint-first-word">Hint:</span>
						Number of previous messages sent to the AI for context.
					</div>
					<label for="temperature-input">Temperature:</label>
					<div class="number-input-container">
						<div class="number-step-down-btn" id="temperature-input-minus">
							-
						</div>
						<input type="number" name="message[temperature]" class="number-input" id="temperature-input" min="0" max="20" value="10" readonly tabindex="-1">
						<div class="number-step-up-btn" id="temperature-input-plus">+</div>
					</div>
					<div class="hint">
						<span class="hint-first-word">Hint:</span>
						Higher values for randomness, lower values for focus in the output.
					</div>
					<label for="system-msg-input">System message:</label>
					<div class="textarea-container">
						<textarea name="message[systemMessage]" id="system-msg-input" rows="2" placeholder="You are a helpful assistant..."></textarea>
					</div>
					<div class="hint">
						<span class="hint-first-word">Hint:</span>
						The system message helps set the behavior of the assistant.<span id="system-msg-hidden-hint-text">
							For example, you can modify the personality of the assistant or provide specific instructions about how it should behave throughout the conversation.</span>
					</div>
					<div id="show-system-msg-hint-btn">
						<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/></svg>
					</div>

					<label>Theme:</label>
					<div class="color-selectors">
						<div class="select-color-btn" id="theme-one">
							<div class="color-two color-box"></div>
							<div class="color-four color-box"></div>
							<div class="color-three color-box"></div>
						</div>

						<div class="select-color-btn" id="theme-two">
							<div class="color-two color-box"></div>
							<div class="color-four color-box"></div>
							<div class="color-three color-box"></div>
						</div>

						<div class="select-color-btn" id="theme-three">
							<div class="color-two color-box"></div>
							<div class="color-four color-box"></div>
							<div class="color-three color-box"></div>
						</div>

						<div class="select-color-btn" id="theme-four">
							<div class="color-two color-box"></div>
							<div class="color-four color-box"></div>
							<div class="color-three color-box"></div>
						</div>
					</div>
					<label>Activation key:</label>
					<div class="key-input-container">
						<div class="key-input-wrapper">
							<input type="text" name="message[premiumUser]" placeholder="a8410a3e-13e5-4056-895e-717bf26485a7">
						</div>
						<div class="key-status-indicator">
							<svg class="key-status-loading" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"/></svg>
							<svg class="key-status-wrong" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>
							<svg class="key-status-correct" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>
						</div>
					</div>

				</div>
			</div>
		</div>


		<div id="chat">
			<div id="chat-title">
				<svg id="delete-chat-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>
				<div id="app-title" onclick="window.location.href='{{ path('app_chat') }}'">
					<img id="app-logo" src="{{ asset('images/logo.png') }}">
					<h1 id="title-text">CustomAI</h1>
				</div>
				<svg id="settings-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
			</div>
			<div id="messages">
				<div id="bottom-padding"></div>
				<div id="scroll-to-bottom">
					<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/></svg>
				</div>
			</div>
			<div id="form-chat">
				<span id="input-disabled-msg"></span>
				<div id="form-inputs">
					<textarea name="message[content]" id="msg-input" rows="1" required></textarea>
					<input type="hidden" name="message[_token]" id="token">
					<svg id="sub-btn" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"/></svg>
				</div>

			</div>
		</div>
	</form>
{% endblock %}
